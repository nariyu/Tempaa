(function(){"use strict";var e,a;e=function(){function e(){}return e.selectorTypes=["foreach","text","html","class","style","attr","visible","data","event"],e.bind=function(a,t){var n,r,o,l,d,i,c,s,u,f,p;for(o=$(a),l=this.helper,null==l&&(l=this),d=o.data("data"),r=o.data("bind-func"),d&&r&&(Object.unobserve?Object.unobserve(d,r):"function"==typeof d.removeListener?d.removeListener("change",r):"function"==typeof d.off&&d.off("change",r)),o.data("data",t),o.data("bind-func",null),t?o.attr("data-bind-has-data","true"):o.removeAttr("data-bind-has-data"),i=function(e,a){var t,n,r,o,d;if(null==a)return{};o='if (typeof data === "undefined" || data === null) { data = {}; }';for(n in l)o+="var "+n+' = helper["'+n+'"];';for(n in a)d=a[n],o+="function"==typeof d?"var "+n+' = $.proxy(data["'+n+'"], data);':"var "+n+' = data["'+n+'"];';o+="return "+e;try{return r=new Function("data","$","context","helper",o),r.call(this,a,$,a,l)}catch(i){if(t=i,console.error("[Tempaa] render properties error: ",t.message),console.log(a),console.log(o),t.message.match(/is not defined/))for(n in a)d=a[n],"function"!=typeof d&&console.log(n,d);return{}}},u=["*[data-bind]"],s=this.selectorTypes,f=0,p=s.length;p>f;f++)c=s[f],u.push("*[data-bind-"+c+"]");return(n=function(){var a,r;return a=o.find(u.join(",")),o.is(u.join(","))&&(a=$([o].concat(a.get()))),r=[],a.each(function(e,a){var t,n,l;return t=$(a),n=t.parent().closest('*[data-bind^="foreach"],*[data-bind-foreach]').get(),r=o.find('*[data-bind^="foreach"],*[data-bind-foreach]').get(),l=[],$.each(r,function(e,a){return $.each(n,function(e,t){return a===t?l.push(t):void 0})}),n=$(l),n.length>0&&r.push(a),n.each(function(e,a){var t,n,r,o;return t=$(a),n=t.data("bind-foreach-template"),n||(r=t.attr("data-bind-template-selector"),"string"==typeof r?(n=$(r),o=n.data("bind-foreach-template"),o&&(n=o)):n=t.children(),t.data("bind-foreach-template",n)),t.empty()})}),a=o.find(u.join(",")),o.is(u.join(","))&&(a=$([o].concat(a.get()))),a.each(function(a,r){var o,l,d,u,f,p,h,b,v,y,m,g,x,j,k,w,A,L,O,T,z,C,Z,q,F,B;for(l=$(r),L=[],z=0,q=s.length;q>z;z++)c=s[z],l.is("*[data-bind-"+c+"]")&&(m=l.attr("data-bind-"+c),L.push({type:c,source:m}));for(l.is("*[data-bind]")&&(o=l.attr("data-bind"),"string"==typeof o&&(h=o.match(/^([a-zA-Z]+)(?:\:(.*))?$/),h&&L.push({type:h[1],source:h[2]}))),C=0,F=L.length;F>C;C++)switch(A=L[C],w=A.type,m=A.source,w=w.replace(/^\s+/,"").replace(/\s+$/,""),m=m.replace("&lt;","<").replace("&gt;",">").replace("&quot;",'"').replace("&amp;","&"),m=m?m.replace(/^\s+/,"").replace(/\s+$/,""):"this",m=m.replace(/(@|\$data)([a-zA-Z])/g,"data.$2"),m=m.replace(/(@|\$data)/g,"data"),w){case"foreach":if(m&&"data"!==m?(T=i("{value:"+m+"}",t),T=T.value):T=t,j=l.data("bind-foreach-template"),l.empty(),T&&($.isArray(T)||"number"==typeof T.length&&"function"==typeof T.push))for(Array.observe&&Array.observe(T,n),Z=0,B=T.length;B>Z;Z++)f=T[Z],k=j.clone(!0),e.bind(k,f),l.append(k);break;case"text":if(null==t)return;T=null,m&&"data"!==m?(T=i("{value:"+m+"}",t),T=T.value):T=t,null==T&&(T=""),y=l.text(),y!==T&&l.text(T);break;case"html":if(null==t)return;T=null,m&&"data"!==m?(T=i("{value:"+m+"}",t),T=T.value):T=t,null==T&&(T=""),y=l.text(),y!==T&&l.html(T);break;case"class":d=i(m,t);for(p in d)T=d[p],T?l.addClass(p):l.removeClass(p);break;case"style":x=i(m,t);for(p in x)g=x[p],v=l.css(p),O=g.replace(/url\(\/(.+)\)/,"url("+location.origin+"$1)"),g!==v&&O!==v&&l.css(p,g);break;case"attr":l.attr(i(m,t));break;case"visible":T=null,m&&"data"!==m?(T=i("{value:"+m+"}",t),T=T.value):T=t,null==T&&(T=!1),T?l.attr("style",(""+l.attr("style")).replace(/display:([^;]+)/,"")):l.hide();break;case"data":T=null,m&&"data"!==m?(T=i("{value:"+m+"}",t),T=T.value):T=t,l.data("data",T);break;case"event":u=i(m,t);for(b in u)T=u[b],l.off(""+b+".tempaa"),l.on(""+b+".tempaa",$.proxy(T,t))}})})(),t&&(Object.observe?(Object.observe(t,n),o.data("bind-func",n)):"function"==typeof t.addListener?(t.addListener("change",n),o.data("bind-func",n)):"function"==typeof t.on&&(t.on("change",n),o.data("bind-func",n))),o},e}(),("undefined"!=typeof module&&null!==module?module.exports:void 0)?module.exports=e:"undefined"!=typeof a&&null!==a?a=e:"undefined"!=typeof window&&null!==window&&(window.Tempaa=e)}).call(this);