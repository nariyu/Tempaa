(function(){"use strict";var e,t,a;"undefined"!=typeof jQuery&&null!==jQuery&&(e=jQuery),t=function(){function t(){}return t.selectorTypes=["foreach","text","html","class","style","attr","prop","visible","data","event"],t.bind=function(a,n){var r,o,d,i,l,u,s,c,f;for(o=e(a),d=this.helper,null==d&&(d=this),i=this.renderProperties,this.destroy(a),o.data("data",n),this.pre&&this.pre.apply(this,[o,n]),n?o.attr("data-bind-has-data","true"):o.removeAttr("data-bind-has-data"),s=[],u=this.selectorTypes,c=0,f=u.length;f>c;c++)l=u[c],s.push("[data-bind-"+l+"]");return(r=function(){var a,c;return a=o.find(s.join(",")),o.is(s.join(","))&&(a=e([o].concat(a.get()))),c=[],a.each(function(t,a){var n,r,d;return n=e(a),r=n.parent().closest("[data-bind-foreach]").get(),c=o.find("[data-bind-foreach]").get(),d=[],e.each(c,function(t,a){return e.each(r,function(e,t){return a===t?d.push(t):void 0})}),r=e(d),r.length>0&&c.push(a),r.each(function(t,a){var n,r,o,d;return n=e(a),r=n.data("bind-foreach-template"),r||(o=n.attr("data-bind-template-selector"),"string"==typeof o?(r=e(o),d=r.data("bind-foreach-template"),d&&(r=d)):r=n.children(),n.data("bind-foreach-template",r)),n.empty()})}),a=o.find(s.join(",")),o.is(s.join(","))&&(a=e([o].concat(a.get()))),a.each(function(a,s){var c,f,p,h,b,y,v,m,g,$,j,x,k,w,A,L,O,T,Q,C,P,z,F,Z,q,B,D;for(c=e(s),O=[],C=0,F=u.length;F>C;C++)l=u[C],c.is("[data-bind-"+l+"]")&&($=c.attr("data-bind-"+l),O.push({type:l,source:$}));for(P=0,Z=O.length;Z>P;P++)switch(L=O[P],A=L.type,$=L.source,A=A.replace(/^\s+/,"").replace(/\s+$/,""),$=$?$.replace(/^\s+/,"").replace(/\s+$/,""):"this",$=$.replace(/(@|\$data)([a-zA-Z])/g,"data.$2"),$=$.replace(/(@|\$data)/g,"data"),A){case"foreach":if($&&"data"!==$?(Q=i("{value:"+$+"}",n,d),Q=Q.value):Q=n,k=c.data("bind-foreach-template"),c.empty(),Q&&(e.isArray(Q)||"number"==typeof Q.length&&"function"==typeof Q.push)){for(Array.observe&&(Array.observe(Q,r),p=o.data("bind-destroy-funcs"),null==p&&(p=[]),p.push(function(){var e;try{return Array.unobserve(Q,r)}catch(t){return e=t,""}}),o.data("bind-destroy-funcs",p)),a=z=0,D=Q.length;D>=0?D>z:z>D;a=D>=0?++z:--z)b=Q[a],b.$$index=a,b.$$before=Q[a-1],b.$$after=Q[a+1];for(B=0,q=Q.length;q>B;B++)b=Q[B],w=k.clone(!0),c.append(w),t.bind(w,b)}break;case"text":if(null==n)return;Q=null,$&&"data"!==$?(Q=i("{value:"+$+"}",n,d),Q=Q.value):Q=n,null==Q&&(Q=""),g=c.text(),g!==Q&&c.text(Q);break;case"html":if(null==n)return;Q=null,$&&"data"!==$?(Q=i("{value:"+$+"}",n,d),Q=Q.value):Q=n,null==Q&&(Q=""),g=c.text(),g!==Q&&c.html(Q);break;case"class":f=i($,n,d);for(y in f)Q=f[y],Q?c.addClass(y):c.removeClass(y);break;case"style":x=i($,n,d);for(y in x)j=x[y],m=c.css(y),T=j.replace(/url\(\/(.+)\)/,"url("+location.origin+"$1)"),j!==m&&T!==m&&c.css(y,j);break;case"attr":c.attr(i($,n,d));break;case"prop":c.prop(i($,n,d));break;case"visible":Q=null,$&&"data"!==$?(Q=i("{value:"+$+"}",n,d),Q=Q.value):Q=n,null==Q&&(Q=!1),Q?c.attr("style",(""+c.attr("style")).replace(/display:([^;]+)/,"")):c.hide();break;case"data":Q=null,$&&"data"!==$?(Q=i("{value:"+$+"}",n,d),Q=Q.value):Q=n,c.data("data",Q);break;case"event":h=i($,n,d);for(v in h)Q=h[v],c.off(""+v+".tempaa"),c.on(""+v+".tempaa",e.proxy(Q,n))}})})(),n&&("function"==typeof n.addListener?(n.addListener("change",r),o.data("bind-func",r)):"function"==typeof n.on?(n.on("change",r),o.data("bind-func",r)):Object.observe&&(Object.observe(n,r),o.data("bind-func",r))),o},t.destroy=function(t){var a,n,r,o,d,i,l;if(o=e(t),d=o.data("data"),a=o.data("bind-func"),d&&a&&("function"==typeof d.removeListener?d.removeListener("change",a):"function"==typeof d.off?d.off("change",a):Object.unobserve&&Object.unobserve(d,a)),r=o.data("bind-destroy-funcs"))for(i=0,l=r.length;l>i;i++)n=r[i],n();return o.data("data",null),o.data("bind-func",null),o.data("bind-destroy-funcs",null)},t.renderProperties=function(t,a,n){var r,o,d,i,l;if(null==a)return{};i='if (typeof data === "undefined" || data === null) { data = {}; }';for(o in n)i+="var "+o+' = helper["'+o+'"];';for(o in a)l=a[o],i+="function"==typeof l?"var "+o+' = $.proxy(data["'+o+'"], data);':"var "+o+' = data["'+o+'"];';i+="return "+t;try{return d=new Function("data","$","context","helper",i),d.call(this,a,e,a,n)}catch(u){return r=u,console.error("[Tempaa] render properties error: ",r.message),{}}},t}(),("undefined"!=typeof module&&null!==module?module.exports:void 0)?module.exports=t:"undefined"!=typeof a&&null!==a?a=t:"undefined"!=typeof window&&null!==window&&(window.Tempaa=t)}).call(this);