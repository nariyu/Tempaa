(function(){"use strict";var e,a;e=function(){function e(){}return e.selectorTypes=["foreach","text","html","class","style","attr","visible","data","event"],e.bind=function(a,t){var n,r,o,l,d,i,c,u,s,f,p;for(o=$(a),l=this.helper,null==l&&(l=this),d=o.data("data"),r=o.data("bind-func"),d&&r&&(Object.unobserve?Object.unobserve(d,r):"function"==typeof d.removeListener?d.removeListener("change",r):"function"==typeof d.off&&d.off("change",r)),o.data("data",t),o.data("bind-func",null),t?o.attr("data-bind-has-data","true"):o.removeAttr("data-bind-has-data"),i=function(e,a){var t,n,r,o,d;if(null==a)return{};o='if (typeof data === "undefined" || data === null) { data = {}; }';for(n in l)o+="var "+n+' = helper["'+n+'"];';for(n in a)d=a[n],o+="function"==typeof d?"var "+n+' = $.proxy(data["'+n+'"], data);':"var "+n+' = data["'+n+'"];';o+="return "+e;try{return r=new Function("data","$","context","helper",o),r.call(this,a,$,a,l)}catch(i){if(t=i,console.error("[Tempaa] render properties error: ",t.message),console.log(a),console.log(o),t.message.match(/is not defined/))for(n in a)d=a[n],"function"!=typeof d&&console.log(n,d);return{}}},s=["*[data-bind]"],u=this.selectorTypes,f=0,p=u.length;p>f;f++)c=u[f],s.push("*[data-bind-"+c+"]");return(n=function(){var a,n;return a=o.find(s.join(",")),o.is(s.join(","))&&(a=$([o].concat(a.get()))),n=[],a.each(function(e,a){var t,r,l;return t=$(a),r=t.parent().closest('*[data-bind^="foreach"],*[data-bind-foreach]').get(),n=o.find('*[data-bind^="foreach"],*[data-bind-foreach]').get(),l=[],$.each(n,function(e,a){return $.each(r,function(e,t){return a===t?l.push(t):void 0})}),r=$(l),r.length>0&&n.push(a),r.each(function(e,a){var t,n,r,o;return t=$(a),n=t.data("bind-foreach-template"),n||(r=t.attr("data-bind-template-selector"),"string"==typeof r?(n=$(r),o=n.data("bind-foreach-template"),o&&(n=o)):n=t.children(),t.data("bind-foreach-template",n)),t.empty()})}),a=o.find(s.join(",")),o.is(s.join(","))&&(a=$([o].concat(a.get()))),a.each(function(a,n){var r,o,l,d,s,f,p,h,b,v,y,m,g,x,j,k,w,A,L,O,T,z,C,Z,q,F;for(o=$(n),A=[],T=0,Z=u.length;Z>T;T++)c=u[T],o.is("*[data-bind-"+c+"]")&&(y=o.attr("data-bind-"+c),A.push({type:c,source:y}));for(o.is("*[data-bind]")&&(r=o.attr("data-bind"),"string"==typeof r&&(p=r.match(/^([a-zA-Z]+)(?:\:(.*))?$/),p&&A.push({type:p[1],source:p[2]}))),z=0,q=A.length;q>z;z++)switch(w=A[z],k=w.type,y=w.source,k=k.replace(/^\s+/,"").replace(/\s+$/,""),y=y.replace("&lt;","<").replace("&gt;",">").replace("&quot;",'"').replace("&amp;","&"),y=y?y.replace(/^\s+/,"").replace(/\s+$/,""):"this",y=y.replace(/(@|\$data)([a-zA-Z])/g,"data.$2"),y=y.replace(/(@|\$data)/g,"data"),k){case"foreach":if(y&&"data"!==y?(O=i("{value:"+y+"}",t),O=O.value):O=t,x=o.data("bind-foreach-template"),o.empty(),O&&($.isArray(O)||"number"==typeof O.length&&"function"==typeof O.push))for(C=0,F=O.length;F>C;C++)s=O[C],j=x.clone(!0),e.bind(j,s),o.append(j);break;case"text":if(null==t)return;O=null,y&&"data"!==y?(O=i("{value:"+y+"}",t),O=O.value):O=t,null==O&&(O=""),v=o.text(),v!==O&&o.text(O);break;case"html":if(null==t)return;O=null,y&&"data"!==y?(O=i("{value:"+y+"}",t),O=O.value):O=t,null==O&&(O=""),v=o.text(),v!==O&&o.html(O);break;case"class":l=i(y,t);for(f in l)O=l[f],O?o.addClass(f):o.removeClass(f);break;case"style":g=i(y,t);for(f in g)m=g[f],b=o.css(f),L=m.replace(/url\(\/(.+)\)/,"url("+location.origin+"$1)"),m!==b&&L!==b&&o.css(f,m);break;case"attr":o.attr(i(y,t));break;case"visible":O=null,y&&"data"!==y?(O=i("{value:"+y+"}",t),O=O.value):O=t,null==O&&(O=!1),O?o.attr("style",(""+o.attr("style")).replace(/display:([^;]+)/,"")):o.hide();break;case"data":O=null,y&&"data"!==y?(O=i("{value:"+y+"}",t),O=O.value):O=t,o.data("data",O);break;case"event":d=i(y,t);for(h in d)O=d[h],o.off(""+h+".tempaa"),o.on(""+h+".tempaa",$.proxy(O,t))}})})(),t&&(Object.observe?(Object.observe(t,n),o.data("bind-func",n)):"function"==typeof t.addListener?(t.addListener("change",n),o.data("bind-func",n)):"function"==typeof t.on&&(t.on("change",n),o.data("bind-func",n))),o},e}(),("undefined"!=typeof module&&null!==module?module.exports:void 0)?module.exports=e:"undefined"!=typeof a&&null!==a?a=e:"undefined"!=typeof window&&null!==window&&(window.Tempaa=e)}).call(this);