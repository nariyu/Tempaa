(function(){"use strict";var e,t;e=function(){function e(){}return e.selectorTypes=["foreach","text","html","class","style","attr","visible","data","event"],e.bind=function(e,t){var a,n,r,l,i,o,s,d,c,u,f,p,h;if(f=this,l=$(e),i=this.helper,null==i&&(i=f),o=l.data("data"),n=l.data("bind-func"),o){try{if(_.isEqual(JSON.parse(JSON.stringify(o)),JSON.parse(JSON.stringify(t))))return}catch(b){r=b}n&&(Object.unobserve?Object.unobserve(o,n):"function"==typeof o.removeListener?o.removeListener("change",n):"function"==typeof o.off&&o.off("change",n))}for(l.removeClass("template"),l.data("data",t),l.data("bind-func",null),s=function(e,t){var a,n,l,o;if(null==t)return{};l='if (typeof data === "undefined" || data === null) { data = {}; }';for(a in i)l+="var "+a+' = helper["'+a+'"];';for(a in t)o=t[a],l+="function"==typeof o?"var "+a+' = $.proxy(data["'+a+'"], data);':"var "+a+' = data["'+a+'"];';l+="return "+e;try{return n=new Function("data","$","context","helper",l),n.call(this,t,$,t,i)}catch(s){if(r=s,console.error("[Tempaa] render properties error: ",r.message),console.log(t),console.log(l),r.message.match(/is not defined/))for(a in t)o=t[a],"function"!=typeof o&&console.log(a,o);return{}}},u=["*[data-bind]"],c=this.selectorTypes,p=0,h=c.length;h>p;p++)d=c[p],u.push("*[data-bind-"+d+"]");return(a=function(){var e;return e=l.find(u.join(",")),l.is(u.join(","))&&(e=$([l].concat(e.get()))),e.each(function(){return function(e,t){var a,n;return a=$(t),n=a.parent().closest('*[data-bind^="foreach"],*[data-bind-foreach]').length,n>0?a.attr("data-bind-skip","true"):a.removeAttr("data-bind-skip")}}(this)),e.each(function(){return function(e,a){var n,r,l,i,o,u,p,h,b,v,y,m,g,k,x,w,O,j,C,A,J,L,N,S,T,q,z,Z;if(l=$(a),!l.attr("data-bind-skip")){for(A=[],N=0,q=c.length;q>N;N++)d=c[N],l.is("*[data-bind-"+d+"]")&&(m=l.attr("data-bind-"+d),A.push({type:d,source:m}));for(l.is("*[data-bind]")&&(r=l.attr("data-bind"),"string"==typeof r&&(h=r.match(/^([a-zA-Z]+)(?:\:(.*))?$/),h&&(n=h[0],j=h[1],m=h[2],A.push({type:j,source:m})))),S=0,z=A.length;z>S;S++)switch(C=A[S],j=C.type,m=C.source,j=j.replace(/^\s+/,"").replace(/\s+$/,""),m=m.replace("&lt;","<").replace("&gt;",">").replace("&quot;",'"').replace("&amp;","&"),m=m?m.replace(/^\s+/,"").replace(/\s+$/,""):"this",m=m.replace(/(@|\$data)([a-zA-Z])/g,"data.$2"),m=m.replace(/(@|\$data)/g,"data"),j){case"foreach":if(m&&"this"!==m?(L=s("{value:"+m+"}",t),L=L.value):L=t,x=l.data("bind-foreach-template"),x||(w=l.attr("data-bind-template-selector"),"string"==typeof w?(x=$(w),O=x.data("bind-foreach-template"),O&&(x=O)):x=l.children(),l.data("bind-foreach-template",x),x.hasClass("template")&&x.removeClass("template")),l.empty(),$.isArray(L)||"number"==typeof(null!=L?L.length:void 0)&&"function"==typeof(null!=L?L.push:void 0))for(T=0,Z=L.length;Z>T;T++)u=L[T],O=x.clone(!0),f.bind(O,u),O.data("data",u),l.append(O);break;case"text":if(null==t)return;L=null,m&&"this"!==m?(L=s("{value:"+m+"}",t),L=L.value):L=t,null==L&&(L=""),y=l.text(),y!==L&&l.text(L);break;case"html":if(null==t)return;L=null,m&&"this"!==m?(L=s("{value:"+m+"}",t),L=L.value):L=t,null==L&&(L=""),y=l.text(),y!==L&&l.html(L);break;case"class":i=s(m,t);for(p in i)L=i[p],L?l.addClass(p):l.removeClass(p);break;case"style":k=s(m,t);for(p in k)g=k[p],v=l.css(p),J=g.replace(/url\(\/(.+)\)/,"url("+location.origin+"$1)"),g!==v&&J!==v&&l.css(p,g);break;case"attr":l.attr(s(m,t));break;case"visible":L=null,m&&"this"!==m?(L=s("{value:"+m+"}",t),L=L.value):L=t,null==L&&(L=!1),L?l.attr("style",(""+l.attr("style")).replace(/display:([^;]+)/,"")):l.hide();break;case"data":L=null,m&&"this"!==m?(L=s("{value:"+m+"}",t),L=L.value):L=t,l.data("data",L);break;case"event":o=s(m,t);for(b in o)L=o[b],l.off(""+b+".tempaa"),l.on(""+b+".tempaa",$.proxy(L,t))}}}}(this))})(),Object.observe?(Object.observe(t,a),l.data("bind-func",a)):"function"==typeof(null!=t?t.addListener:void 0)?(t.addListener("change",a),l.data("bind-func",a)):"function"==typeof(null!=t?t.on:void 0)&&(t.on("change",a),l.data("bind-func",a)),l},e}(),("undefined"!=typeof module&&null!==module?module.exports:void 0)?module.exports=e:"undefined"!=typeof t&&null!==t?t=e:"undefined"!=typeof window&&null!==window&&(window.Tempaa=e)}).call(this);